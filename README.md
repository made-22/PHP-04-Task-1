# Short URL Service

Сервис для сокращения ссылки.

## Первый запуск

Для демонстрации можно запустить сервис через docker-compose. Конфиги .env и .env.testing(окружение для тестирования)
заранее настроены для демонстрации и находятся в индексе.
Для первого запуска достаточно выполнить команду `sh first-run.sh` (убедитесь, что порты 80, 5432, 6379 свободны):

1. Будет выполнена сборка и запуск проекта при помощи docker-compose.
2. Будут созданы основная БД и БД для тестов.
3. Будет выполнена установка приложения и запуск миграций с наполнением тестовыми данными.
4. Запустится обработчик очереди

## Дополнительные команды

### Запуск тестов

`docke-compose exec app php artisan test`

## ТЗ

Необходимо разработать HTTP-сервис, который генерирует короткие ссылки. При переходе по короткой ссылке информация о
пользователе (user agent и ip) сохраняется сервисом, после этого пользователя редиректит на необходимый url.

Нужно иметь возможность создать несколько ссылок с передаваемыми данными в следующем формате:

```json

[
    {
        "long_url": "https://google.com",
        "title": "Cool link to google",
        "tags": [
            "search_engines",
            "google"
        ]
    },
    {
        "long_url": "https://yandex.com"
    },
    {
        "long_url": "https://bing.com",
        "tags": [
            "search_engines",
            "bing"
        ]
    }
]
```

Обновление данные ссылки должно происходить методом PATCH /links/{id}.
При создании/обновлении необходимо предусмотреть случаи, когда ссылка, которую нужно сократить ошибочна (не существует,
не отвечает) или поля не
прошли валидацию.

Также необходимо предусмотреть возможность получения данных по конкретной ссылке, по нескольким ссылкам, удаление
ссылки.

### Статистика

Реализовать получение статистики по id ссылки с агрегацией по дате, сортировка - по дате по убыванию.

* total_views - кол-во всех переходов по ссылке;
* unique_views - кол-во переходов по ссылке уникальных пользователей (в зависимости от ip и User Agent).

Реализовать получение общей статистики. Cортировать по кол-ву уникальных пользователей по убыванию
